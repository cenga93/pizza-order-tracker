!function n(o,a,s){function l(r,e){if(!a[r]){if(!o[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(i)return i(r,!0);throw new Error("Cannot find module '"+r+"'")}t=a[r]={exports:{}};o[r][0].call(t.exports,function(e){var t=o[r][1][e];return l(t||e)},t,t.exports,n,o,a,s)}return a[r].exports}for(var i="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}({1:[function(e,t,r){t.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},t.exports.default=t.exports,t.exports.__esModule=!0},{}],2:[function(e,t,r){var n=e("./arrayLikeToArray.js");t.exports=function(e){if(Array.isArray(e))return n(e)},t.exports.default=t.exports,t.exports.__esModule=!0},{"./arrayLikeToArray.js":1}],3:[function(e,t,r){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},{}],4:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},t.exports.default=t.exports,t.exports.__esModule=!0},{}],5:[function(e,t,r){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.default=t.exports,t.exports.__esModule=!0},{}],6:[function(e,t,r){t.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)},t.exports.default=t.exports,t.exports.__esModule=!0},{}],7:[function(e,t,r){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},{}],8:[function(e,t,r){var n=e("./arrayWithoutHoles.js"),o=e("./iterableToArray.js"),a=e("./unsupportedIterableToArray.js"),s=e("./nonIterableSpread.js");t.exports=function(e){return n(e)||o(e)||a(e)||s()},t.exports.default=t.exports,t.exports.__esModule=!0},{"./arrayWithoutHoles.js":2,"./iterableToArray.js":6,"./nonIterableSpread.js":7,"./unsupportedIterableToArray.js":9}],9:[function(e,t,r){var n=e("./arrayLikeToArray.js");t.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},{"./arrayLikeToArray.js":1}],10:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),o=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),e=n(e("@babel/runtime/helpers/toConsumableArray")),s=document.querySelectorAll(".products__button"),l=document.querySelector(".orderID")?document.querySelector(".orderID"):null,i=(0,e.default)(document.querySelectorAll(".single-order__item")),u=function(){function e(){(0,o.default)(this,e)}return(0,a.default)(e,[{key:"updateCart",value:function(e){$.post({traditional:!0,url:"/cart",contentType:"application/json",data:e,dataType:"json",error:function(e){throw new Error(e)}}).then(function(e){var t=document.querySelector(".nav-counter");null==t?((t=document.createElement("span")).classList.add("nav-counter"),t.classList.add("mr-1"),t.classList.add("text-light"),t.innerText=e.data.totalQty,document.querySelectorAll(".navbar__item--cart a")[0].prepend(t)):t.innerText=e.data.totalQty,alert("Add item to cart")}).catch(function(e){throw new Error(e)})}}]),e}(),c=function(){function e(){(0,o.default)(this,e)}return(0,a.default)(e,[{key:"adminOrder",value:function(){var t,r=this,n=document.querySelector("#adminOrderTableBody");$.ajax({type:"GET",url:"/admin/orders",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(e){t=r.generateMarkUp(e),n.innerHTML=t}).catch(function(e){console.log("ERROR",e.message)})}},{key:"generateMarkUp",value:function(e){return e.map(function(e){var t=e.address,r=e.status,n=e._id,o=e.customerId,a=o.firstname,o=o.lastname,e=e.phone;return'\n          <tr> \n            <td class="border px-3">'.concat(n,'</td>\n            <td class="border px-3">').concat(a," ").concat(o,'</td>\n            <td class="border px-3">').concat(t,'</td>\n            <td class="border px-3">   \n              <form action="/admin/orders/status" method="POST" > \n                <input type="hidden" name="orderId" value=').concat(n,' />\n                <select class="form-select" onchange="this.form.submit()" name="status">\n                  <option selected disabled>select one</option>  \n                  <option value="order_placed" ').concat("order_placed"===r?"selected":"",'>Placed</option>\n                  <option value="confirmed" ').concat("confirmed"===r?"selected":"",'>Confirmed</option> \n                  <option value="prepared" ').concat("prepared"===r?"selected":"",'>Prepared</option>\n                  <option value="delivered" ').concat("delivered"===r?"selected":"",'>Delivered</option>\n                  <option value="completed" ').concat("completed"===r?"selected":"",'>Completed</option>\n                </select>\n              </form>\n            </td>  \n            <td class="border px-3">').concat(e,'</td>\n            <td class="border px-3">placeno || nije placeno</td>\n          </tr>')}).join("")}},{key:"updateStatus",value:function(r){var n=!0;i.map(function(e){var t=e.dataset.step;n&&e.classList.add("single-order__item--completed"),t===r.status&&(n=!1,e.nextElementSibling&&e.nextElementSibling.classList.add("single-order__item--current"))})}}]),e}();window.addEventListener("DOMContentLoaded",function(){var t=new u,e=new c;window.addEventListener("click",function(){localStorage.setItem("currentPage",window.location.href)}),s.forEach(function(e){e.addEventListener("click",function(){t.updateCart(e.dataset.pizza)})}),"/admin/orders"===window.location.pathname&&e.adminOrder(),e.updateStatus(JSON.parse(l.value))})},{"@babel/runtime/helpers/classCallCheck":3,"@babel/runtime/helpers/createClass":4,"@babel/runtime/helpers/interopRequireDefault":5,"@babel/runtime/helpers/toConsumableArray":8}]},{},[10]);
//# sourceMappingURL=app.min.js.map
